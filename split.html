<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Splitter - Split PDF Pages</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://unpkg.com/downloadjs@1.4.7"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-width: 800px;
            width: 100%;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1rem;
        }
        
        .upload-area {
            border: 3px dashed #ff6b6b;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            background: #fff5f5;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background: #ffecec;
            border-color: #ff5252;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: #ff6b6b;
            margin-bottom: 15px;
        }
        
        .file-input {
            display: none;
        }
        
        .btn {
            padding: 12px 25px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .split-options {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .option-group {
            margin-bottom: 15px;
        }
        
        .option-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .page-ranges {
            margin-top: 15px;
        }
        
        .range-example {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }
        
        .status {
            padding: 12px;
            margin: 15px 0;
            border-radius: 6px;
            text-align: center;
            font-weight: 500;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .file-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4dabf7;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>PDF Splitter</h1>
            <p class="subtitle">Split PDF into multiple files or extract specific pages</p>
        </header>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">ðŸ“„</div>
            <h3>Select PDF File to Split</h3>
            <p>Choose a PDF file or drag & drop it here</p>
            <input type="file" id="fileInput" class="file-input" accept=".pdf">
            <button class="btn" onclick="document.getElementById('fileInput').click()">Select PDF File</button>
        </div>
        
        <div id="splitSection" style="display: none;">
            <div class="file-info" id="fileInfo">
                <strong>Selected File:</strong> <span id="fileName"></span><br>
                <strong>Total Pages:</strong> <span id="totalPages"></span>
            </div>
            
            <div class="split-options">
                <h3>Split Options</h3>
                
                <div class="option-group">
                    <label>Split Method:</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="splitMethod" value="every" checked> Split every page
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="splitMethod" value="range"> Split by page range
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="splitMethod" value="custom"> Custom pages
                        </label>
                    </div>
                </div>
                
                <div class="option-group" id="rangeGroup" style="display: none;">
                    <label for="pageRange">Page Range (e.g., 1-3,5,7-9):</label>
                    <input type="text" id="pageRange" class="form-control" placeholder="Enter page ranges">
                    <div class="range-example">Example: 1-3,5,7-9 will create separate PDFs for pages 1-3, page 5, and pages 7-9</div>
                </div>
                
                <div class="option-group" id="customGroup" style="display: none;">
                    <label for="customPages">Specific Pages (comma-separated):</label>
                    <input type="text" id="customPages" class="form-control" placeholder="Enter page numbers">
                    <div class="range-example">Example: 1,3,5 will create separate PDFs for pages 1, 3, and 5</div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-success" id="splitBtn">Split PDF</button>
                <button class="btn" id="resetBtn">Reset</button>
            </div>
        </div>
        
        <div id="statusArea"></div>
    </div>

    <script>
        let selectedFile = null;
        let totalPages = 0;
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const splitSection = document.getElementById('splitSection');
        const fileName = document.getElementById('fileName');
        const totalPagesSpan = document.getElementById('totalPages');
        const splitBtn = document.getElementById('splitBtn');
        const resetBtn = document.getElementById('resetBtn');
        const statusArea = document.getElementById('statusArea');
        const rangeGroup = document.getElementById('rangeGroup');
        const customGroup = document.getElementById('customGroup');

        // File selection handling
        fileInput.addEventListener('change', handleFileSelect);
        
        // Split method selection
        document.querySelectorAll('input[name="splitMethod"]').forEach(radio => {
            radio.addEventListener('change', function() {
                rangeGroup.style.display = 'none';
                customGroup.style.display = 'none';
                
                if (this.value === 'range') {
                    rangeGroup.style.display = 'block';
                } else if (this.value === 'custom') {
                    customGroup.style.display = 'block';
                }
            });
        });

        // Drag and drop functionality
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.background = '#ffecec';
            uploadArea.style.borderColor = '#ff5252';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.background = '#fff5f5';
            uploadArea.style.borderColor = '#ff6b6b';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.background = '#fff5f5';
            uploadArea.style.borderColor = '#ff6b6b';
            
            const files = Array.from(e.dataTransfer.files).filter(file => 
                file.type === 'application/pdf' || file.name.toLowerCase().endsWith('.pdf')
            );
            
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        function handleFileSelect(e) {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        }

        async function handleFile(file) {
            if (!file.type.includes('pdf') && !file.name.toLowerCase().endsWith('.pdf')) {
                showStatus('Please select a PDF file.', 'error');
                return;
            }
            
            selectedFile = file;
            fileName.textContent = file.name;
            
            try {
                // Get total pages count
                const arrayBuffer = await file.arrayBuffer();
                const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
                totalPages = pdfDoc.getPageCount();
                totalPagesSpan.textContent = totalPages;
                
                splitSection.style.display = 'block';
                showStatus(`PDF loaded successfully! Total pages: ${totalPages}`, 'success');
            } catch (error) {
                showStatus('Error reading PDF file: ' + error.message, 'error');
            }
        }

        // Split PDF functionality
        splitBtn.addEventListener('click', async () => {
            if (!selectedFile) {
                showStatus('Please select a PDF file first.', 'error');
                return;
            }
            
            const splitMethod = document.querySelector('input[name="splitMethod"]:checked').value;
            
            try {
                showStatus('Splitting PDF...', 'info');
                splitBtn.disabled = true;
                
                const arrayBuffer = await selectedFile.arrayBuffer();
                const originalPdf = await PDFLib.PDFDocument.load(arrayBuffer);
                
                let splitPromises = [];
                
                if (splitMethod === 'every') {
                    // Split every page into separate PDF
                    for (let i = 0; i < totalPages; i++) {
                        const newPdf = await PDFLib.PDFDocument.create();
                        const [page] = await newPdf.copyPages(originalPdf, [i]);
                        newPdf.addPage(page);
                        const pdfBytes = await newPdf.save();
                        splitPromises.push({ pdfBytes, pageNumber: i + 1 });
                    }
                } else if (splitMethod === 'range') {
                    const ranges = parsePageRanges(document.getElementById('pageRange').value, totalPages);
                    if (ranges.length === 0) {
                        throw new Error('Invalid page range format');
                    }
                    
                    for (const range of ranges) {
                        const newPdf = await PDFLib.PDFDocument.create();
                        const pageIndices = Array.from({length: range.end - range.start + 1}, (_, i) => range.start + i);
                        const pages = await newPdf.copyPages(originalPdf, pageIndices);
                        pages.forEach(page => newPdf.addPage(page));
                        const pdfBytes = await newPdf.save();
                        splitPromises.push({ 
                            pdfBytes, 
                            pageRange: `pages-${range.start + 1}-${range.end + 1}` 
                        });
                    }
                } else if (splitMethod === 'custom') {
                    const pages = parseCustomPages(document.getElementById('customPages').value, totalPages);
                    if (pages.length === 0) {
                        throw new Error('Invalid page numbers');
                    }
                    
                    for (const pageNum of pages) {
                        const newPdf = await PDFLib.PDFDocument.create();
                        const [page] = await newPdf.copyPages(originalPdf, [pageNum - 1]);
                        newPdf.addPage(page);
                        const pdfBytes = await newPdf.save();
                        splitPromises.push({ pdfBytes, pageNumber: pageNum });
                    }
                }
                
                // Download all split PDFs
                for (const { pdfBytes, pageNumber, pageRange } of splitPromises) {
                    const filename = pageRange 
                        ? `${selectedFile.name.replace('.pdf', '')}-${pageRange}.pdf`
                        : `${selectedFile.name.replace('.pdf', '')}-page-${pageNumber}.pdf`;
                    
                    download(pdfBytes, filename, "application/pdf");
                }
                
                showStatus(`PDF split successfully! ${splitPromises.length} file(s) downloaded.`, 'success');
                
            } catch (error) {
                console.error('Split error:', error);
                showStatus('Error splitting PDF: ' + error.message, 'error');
            } finally {
                splitBtn.disabled = false;
            }
        });

        function parsePageRanges(rangeStr, maxPages) {
            const ranges = [];
            const parts = rangeStr.split(',');
            
            for (const part of parts) {
                if (part.includes('-')) {
                    const [start, end] = part.split('-').map(num => parseInt(num.trim()) - 1);
                    if (!isNaN(start) && !isNaN(end) && start >= 0 && end < maxPages && start <= end) {
                        ranges.push({ start, end });
                    }
                } else {
                    const page = parseInt(part.trim()) - 1;
                    if (!isNaN(page) && page >= 0 && page < maxPages) {
                        ranges.push({ start: page, end: page });
                    }
                }
            }
            
            return ranges;
        }

        function parseCustomPages(pagesStr, maxPages) {
            const pages = [];
            const parts = pagesStr.split(',');
            
            for (const part of parts) {
                const page = parseInt(part.trim());
                if (!isNaN(page) && page >= 1 && page <= maxPages) {
                    pages.push(page);
                }
            }
            
            return [...new Set(pages)]; // Remove duplicates
        }

        resetBtn.addEventListener('click', () => {
            selectedFile = null;
            fileInput.value = '';
            splitSection.style.display = 'none';
            document.getElementById('pageRange').value = '';
            document.getElementById('customPages').value = '';
            document.querySelector('input[name="splitMethod"][value="every"]').checked = true;
            rangeGroup.style.display = 'none';
            customGroup.style.display = 'none';
            showStatus('Reset completed. Select a new PDF file to split.', 'info');
        });

        function showStatus(message, type) {
            statusArea.innerHTML = `<div class="status status-${type}">${message}</div>`;
        }

        // Initialize
        showStatus('Select a PDF file to split it into multiple documents.', 'info');
    </script>
</body>
</html>